# set character state

Manually sets the state of a [sprite](/types/sprite) to match the given rule.
This state will stay until this function is called again or it is cleared.
Once state is cleared, it will go back to automatically updating.
If the state is invalid (e.g. "Moving and NotMoving") then it will be ignored.

This function is useful for games that make sprites look like they are moving without actually setting their velocity.
For example, in cutscenes or games where projectiles come towards the player.
If your game uses velocity or the "move sprite with controller" block, you should probably avoid using this function.

```sig
characterAnimations.setCharacterState(sprites.create(img`
    .
    `, characterAnimations.rule(Predicate.NotMoving))
```

## Parameters

* **sprite**: a [sprite](/types/sprite) to set the state of
* **rule**: a rule that will be the sprite's new state

## Example #example

In this example, we create a plane that looks like it's flying because clouds are moving in the opposite direction.
We manually set the state of the plane to "MovingRight" and toggle it whenever the A button is pressed to pause/unpause the game.

```blocks
controller.A.onEvent(ControllerButtonEvent.Pressed, function () {
    stopped = !(stopped)
    if (stopped) {
        for (let value of sprites.allOfKind(SpriteKind.Projectile)) {
            value.setVelocity(0, 0)
        }
        characterAnimations.setCharacterState(mySprite, characterAnimations.rule(Predicate.NotMoving))
        mySprite.say("PAUSE")
    } else {
        for (let value of sprites.allOfKind(SpriteKind.Projectile)) {
            value.setVelocity(-50, 0)
        }
        characterAnimations.setCharacterState(mySprite, characterAnimations.rule(Predicate.MovingRight))
        mySprite.say("")
    }
})
let projectile: Sprite = null
let stopped = false
let mySprite: Sprite = null
scene.setBackgroundColor(9)
mySprite = sprites.create(img`
    ..ccc.........ffffff....
    ..f4cc.......fcc22ff....
    ..f44cc...fffccccff.....
    ..f244cccc22224442cc....
    ..f224cc2222222244b9c...
    ..cf2222222222222b999c..
    .c22c222222222b11199b2c.
    f22ccccccc222299111b222c
    fffffcc222c222222222222f
    .....f2222442222222222f.
    ....f222244fc2222222ff..
    ...c222244ffffffffff....
    ...c2222cfffc2f.........
    ...ffffffff2ccf.........
    .......ffff2cf..........
    ........fffff...........
    `, SpriteKind.Player)
characterAnimations.loopFrames(
mySprite,
[img`
    ..ccc.........ffffff....
    ..f4cc.......fcc22ff....
    ..f44cc...fffccccff.....
    ..f244cccc22224442cc....
    ..f224cc2222222244b9c...
    ..cf2222222222222b999c..
    .c22c222222222b11199b2c.
    f22ccccccc222299111b222c
    fffffcc222c222222222222f
    .....f2222442222222222f.
    ....f222244fc2222222ff..
    ...c222244ffffffffff....
    ...c2222cfffc2f.........
    ...ffffffff2ccf.........
    .......ffff2cf..........
    ........fffff...........
    `,img`
    ..ccc.........ffffff....
    ..f4cc.......fcc22ff....
    ..f44cc...fffccccff.....
    ..f244cccc22224442cc....
    ..f224cc2222222244b9c...
    ..cf222222222222b9999c..
    .c22c222222222911199b2c.
    f22ccccccc22229911b2222c
    fffffcc222c222222222222f
    .....f2224442222222222f.
    ....f222444fc2222222ff..
    ...c222444ffffffffff....
    ...c2222cfffc2f.........
    ...ffffffff2ccf.........
    .......ffff2cf..........
    ........fffff...........
    `,img`
    ..ccc..........ffffff...
    ..f44c.......ffcc22ff...
    ..f244c...fffccccfff....
    ..f2244ccc22224442cc....
    ..cf22cc222222222b99c...
    .c222222222222b111999c..
    f222ccccccc22299111bb2c.
    fffffccc222c22222222222c
    ...ccc22224422222222222f
    ...c222244422222222222f.
    ...c22244cffc2222222ff..
    ....ccccffffcfffffff....
    .......ffff2c2f.........
    .......ffff2ccf.........
    ........ffffff..........
    ........................
    `,img`
    ..ccc.........fffffff...
    ..f4cc.......ffcc22ff...
    ..f44cc...fffccccfff....
    ..f244cccc22224442cc....
    ..f224cc2222222244b9c...
    ..cf2222222222222b999c..
    .c22c222222222b11199b2c.
    f22ccccccc222299111b222c
    fffffcc222c222222222222f
    .....f2222442222222222f.
    ....f222244fc2222222ff..
    ...c222244ffffffffff....
    ...c2222cfffc2f.........
    ...ffffffff2ccf.........
    .......ffff2cf..........
    ........fffff...........
    `,img`
    ..............ffffff....
    ..fc.........fcc22ff....
    ..f4c.....fffccccff.....
    ..f44ccccc22222222cc....
    ..f244ccc222224442b9c...
    ..cf24222222222244999c..
    .ccf2222222222222999b2c.
    fc22cc22222222b1111b222c
    f22ccccccc2222991122222f
    ffffffc222c22222222222f.
    ....ff222244c2222222ff..
    ...cf222244fffffffff....
    ...c222244ffc2f.........
    ...c2222cfffccf.........
    ...ffffffff2cf..........
    ........fff2c...........
    `,img`
    ..............ffffff....
    ..fc.........fccc2ff....
    ..f4c.....fffccc2ff.....
    ..f44ccccc22222222cc....
    ..f244ccc222224442b9c...
    ..cf24222222222244999c..
    .ccf2222222222222199b2c.
    fc22cc22222222b1111b222c
    f22ccccccc2222991222222f
    ffffffc222c22222222222f.
    ....ff222244c2222222ff..
    ...cf222244fffffffff....
    ...c222244ffc2f.........
    ...c2222cfffccf.........
    ...ffffffff2cf..........
    ........fff2c...........
    `],
200,
characterAnimations.rule(Predicate.MovingRight)
)
characterAnimations.setCharacterState(mySprite, characterAnimations.rule(Predicate.MovingRight))
stopped = false
game.onUpdateInterval(1000, function () {
    if (!(stopped)) {
        projectile = sprites.createProjectileFromSide(img`
            .........................111....
            .....111111..1111111...1111111..
            ....111111111111111111111111111.
            ....111111111111111111111111111.
            ....111111111111111111111111111.
            ...111111111111111111111111111..
            ...1111111111111111111111111111.
            ..11111111111111111111111111111.
            ..111111111111111111111111111111
            .1111111111111111111111111111111
            11111111111111111111111111111111
            11111111111111111111111111111111
            1111111111111111111111111111111.
            .11111111111111111111111111111..
            .111111111...111111111111111....
            .................11111111.......
            `, -50, 0)
        projectile.y = randint(16, 104)
    }
})

```

```package
arcade-story=github:microsoft/arcade-character-animations
```